
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>useTextAsImage Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../concepts/control-button.html" />
    
    
    <link rel="prev" href="use-content-editable-false.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Bandicoot Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Walkthrough</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../walkthrough/getting-started.html">
            
                <a href="../walkthrough/getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../walkthrough/bold-italic-underline.html">
            
                <a href="../walkthrough/bold-italic-underline.html">
            
                    
                    Bold, Italic, and Underline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="use-font-size.html">
            
                <a href="use-font-size.html">
            
                    
                    Changing font size
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="use-image.html">
            
                <a href="use-image.html">
            
                    
                    Inserting images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="use-link.html">
            
                <a href="use-link.html">
            
                    
                    Inserting links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="use-content-editable-false.html">
            
                <a href="use-content-editable-false.html">
            
                    
                    Atomic Blocks
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Components</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../components/rich-text-editor.html">
            
                <a href="../components/rich-text-editor.html">
            
                    
                    RichTextEditor
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Hooks</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="use-document-exec-command.html">
            
                <a href="use-document-exec-command.html">
            
                    
                    useDocumentExecCommand
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="use-document-query-command-state.html">
            
                <a href="use-document-query-command-state.html">
            
                    
                    useDocumentQueryCommandState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="use-font-size.html">
            
                <a href="use-font-size.html">
            
                    
                    useFontSize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="use-image.html">
            
                <a href="use-image.html">
            
                    
                    useImage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="use-link.html">
            
                <a href="use-link.html">
            
                    
                    useLink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="use-content-editable-false.html">
            
                <a href="use-content-editable-false.html">
            
                    
                    useContentEditableFalse
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.7" data-path="use-text-as-image.html">
            
                <a href="use-text-as-image.html">
            
                    
                    useTextAsImage
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Concepts</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../concepts/control-button.html">
            
                <a href="../concepts/control-button.html">
            
                    
                    Control Button
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../concepts/uncontrolled-editor.html">
            
                <a href="../concepts/uncontrolled-editor.html">
            
                    
                    Uncontrolled editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../concepts/content-editable.html">
            
                <a href="../concepts/content-editable.html">
            
                    
                    Content Editable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../concepts/selection.html">
            
                <a href="../concepts/selection.html">
            
                    
                    Selection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../concepts/range.html">
            
                <a href="../concepts/range.html">
            
                    
                    Range
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >useTextAsImage</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="usetextasimage">useTextAsImage</h1>
<p>The <code>useTextAsImage</code> hook allows you to insert <em>unmodifiable text</em> into your rich text editor. This functionality
is sometimes also called &quot;atomic elements&quot; or &quot;atomic blocks&quot;.</p>
<h2 id="basic-example">Basic Example</h2>
<pre><code class="lang-jsx"><span class="hljs-keyword">import</span> {useTextAsImage} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;bandicoot&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AtomicElement</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> {insertTextAsImage} = useTextAsImage()

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> insertTextAsImage(&apos;some unmodifiable text&apos;)}&gt;
      Insert atomic element
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<h2 id="explanation">Explanation</h2>
<p>The way that <code>useTextAsImage</code> accomplishes this is by converting a string of text into an image and then inserting
the image into the rich text editor. Since an image is treated by the browser as one big unmodifiable thing,
the cursor, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection" target="_blank">selection</a>, and keyboard shortcuts are all
handled as if the text is unmodifiable.</p>
<p>Bandicoot uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL" target="_blank">canvas.toDataURL()</a> to
create an img url for a string of text.</p>
<h2 id="serialization-and-deserialization">Serialization and Deserialization</h2>
<p>Although displaying text as an image has advantages for in-browser editing, it is not desirable to store things that way
in a database. So instead of storing <code>&lt;img data-text-as-image=&quot;the text&quot; src=&quot;data:garbled-weird-url&quot;&gt;</code> in the database,
<code>useTextAsImage</code> converts the <code>&lt;img&gt;</code> into <code>&lt;span data-text-as-image=&quot;the text&quot; /&gt;</code> before it is saved. This process is called
serialization.</p>
<p>When processing stored html from a database, <code>useTextAsImage</code> will perform the reverse operation (deserialization) and will convert
the <code>&lt;span&gt;</code> back into an <code>&lt;img&gt;</code>.</p>
<h2 id="advanced-example">Advanced Example</h2>
<pre><code class="lang-jsx"><span class="hljs-keyword">import</span> {useState} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> {useTextAsImage} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;bandicoot&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AtomicElement</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [unmodifiableText, setUnmodifiableText] = useState(<span class="hljs-string">&apos;&apos;</span>)
  <span class="hljs-keyword">const</span> {insertTextAsImage} = useTextAsImage({processSerializedElement})

  <span class="hljs-keyword">return</span> (
    &lt;&gt;
      &lt;input value={unmodifiableText} onChange={setUnmodifiableText} placeholder=&quot;Unmodifiable text&quot; /&gt;
      &lt;button onClick={() =&gt; insertTextAsImage(&apos;some unmodifiable text&apos;)}&gt;
        Insert atomic element
      &lt;/button&gt;
    &lt;/&gt;
  )

  function processSerializedElement(element, text) {
    // element is a dom element that is about to be turned into an html string that will be &quot;saved&quot;. We can
    // customize what html is saved by modifying the element.
    element.textContent = text
  }
}
</code></pre>
<h2 id="limitations">Limitations</h2>
<p>Since <code>useTextAsImage</code> creates an image for the text, it must choose the font size, family, and style upfront. If the surrounding
text changes its font in any way, the image will not change.</p>
<h2 id="alternatives">Alternatives</h2>
<p>The <a href="../use-content-editable-false/README.md">useContentEditableFalse</a> hook provides an alternative way of doing the same thing.
It also can handle inserting arbitrary html instead of just text strings.</p>
<h2 id="api">API</h2>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> {insertTextAsImage} = useTextAsImage({processSerializedElement})
</code></pre>
<h3 id="arguments">Arguments</h3>
<p><code>useTextAsImage</code> optionally accepts one argument - an options object with the following properties:</p>
<ul>
<li><code>processSerializedElement</code>: A function that will be called whenever <code>useTextAsImage</code> is serializing an element to an html string.
The function will be called with one argument, which is the dom element.</li>
</ul>
<h3 id="return-value">Return value</h3>
<p><code>useTextAsImage</code> returns an object with the following properties:</p>
<ul>
<li><code>insertTextAsImage(text)</code>: A function that will insert unmodifiable text into the rich text editor. The function must be called
with a string <code>text</code>.</li>
</ul>
<h2 id="notes">Notes</h2>
<ul>
<li><code>useTextAsImage</code> uses <a href="use-document-exec-command.html"><code>useDocumentExecCommand</code></a> underneath the hood to call <code>document.execCommand()</code>.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="use-content-editable-false.html" class="navigation navigation-prev " aria-label="Previous page: useContentEditableFalse">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../concepts/control-button.html" class="navigation navigation-next " aria-label="Next page: Control Button">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"useTextAsImage","level":"4.7","depth":1,"next":{"title":"Control Button","level":"5.1","depth":1,"path":"concepts/control-button.md","ref":"concepts/control-button.md","articles":[]},"previous":{"title":"useContentEditableFalse","level":"4.6","depth":1,"path":"hooks/use-content-editable-false.md","ref":"hooks/use-content-editable-false.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"hooks/use-text-as-image.md","mtime":"2019-01-26T03:59:17.789Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-01-26T04:00:01.388Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

