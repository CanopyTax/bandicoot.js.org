
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Inserting images Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="use-link.html" />
    
    
    <link rel="prev" href="../walkthrough/headers.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Bandicoot Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Walkthrough</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../walkthrough/getting-started.html">
            
                <a href="../walkthrough/getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../walkthrough/bold-italic-underline.html">
            
                <a href="../walkthrough/bold-italic-underline.html">
            
                    
                    Bold, Italic, and Underline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="use-font-size.html">
            
                <a href="use-font-size.html">
            
                    
                    Changing font size
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../walkthrough/headers.html">
            
                <a href="../walkthrough/headers.html">
            
                    
                    H1, H2, H3
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.5" data-path="use-image.html">
            
                <a href="use-image.html">
            
                    
                    Inserting images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="use-link.html">
            
                <a href="use-link.html">
            
                    
                    Inserting links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="use-content-editable-false.html">
            
                <a href="use-content-editable-false.html">
            
                    
                    Atomic Blocks
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Components</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../components/rich-text-editor.html">
            
                <a href="../components/rich-text-editor.html">
            
                    
                    RichTextEditor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../components/rich-text-container.html">
            
                <a href="../components/rich-text-container.html">
            
                    
                    RichTextContainer
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Hooks</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="use-document-exec-command.html">
            
                <a href="use-document-exec-command.html">
            
                    
                    useDocumentExecCommand
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="use-document-query-command-state.html">
            
                <a href="use-document-query-command-state.html">
            
                    
                    useDocumentQueryCommandState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="use-font-size.html">
            
                <a href="use-font-size.html">
            
                    
                    useFontSize
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.4" data-path="use-image.html">
            
                <a href="use-image.html">
            
                    
                    useImage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="use-link.html">
            
                <a href="use-link.html">
            
                    
                    useLink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="use-content-editable-false.html">
            
                <a href="use-content-editable-false.html">
            
                    
                    useContentEditableFalse
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="use-text-as-image.html">
            
                <a href="use-text-as-image.html">
            
                    
                    useTextAsImage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="use-element-deletion-detection.html">
            
                <a href="use-element-deletion-detection.html">
            
                    
                    useElementDeletionDetection
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Context</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../context/rich-text-context.html">
            
                <a href="../context/rich-text-context.html">
            
                    
                    RichTextContext
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Concepts</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../concepts/control-button.html">
            
                <a href="../concepts/control-button.html">
            
                    
                    Control Button
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../concepts/uncontrolled-editor.html">
            
                <a href="../concepts/uncontrolled-editor.html">
            
                    
                    Uncontrolled editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../concepts/content-editable.html">
            
                <a href="../concepts/content-editable.html">
            
                    
                    Content Editable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../concepts/selection.html">
            
                <a href="../concepts/selection.html">
            
                    
                    Selection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="../concepts/range.html">
            
                <a href="../concepts/range.html">
            
                    
                    Range
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="../concepts/undo-redo.html">
            
                <a href="../concepts/undo-redo.html">
            
                    
                    Undo / Redo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="../concepts/pasting.html">
            
                <a href="../concepts/pasting.html">
            
                    
                    Pasting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="../concepts/serialization.html">
            
                <a href="../concepts/serialization.html">
            
                    
                    Serialization
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Inserting images</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="useimage">useImage</h1>
<p>The <code>useImage</code> hook makes it easy to implement inline images into your rich text editor.</p>
<p>The DOM already supports inline images with a one-liner:
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand#Commands" target="_blank"><code>document.execCommand(&apos;insertImage&apos;, null, &apos;https://mycdn.com/path-to-image.png&apos;)</code></a>.
Unfortunately, though, it still can be hard to choose an image, create a url for the image, style the image, or remove an image.
Which is where the <code>useImage</code> hook helps out.</p>
<h2 id="basic-example">Basic Example</h2>
<pre><code class="lang-jsx"><span class="hljs-keyword">import</span> {useImage} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;bandicoot&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Image</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> {chooseFile} = useImage()

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{chooseFile}</span>&gt;</span>
      Insert Image from Computer
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<h2 id="advanced-example">Advanced Example</h2>
<pre><code class="lang-jsx"><span class="hljs-keyword">import</span> {useImage} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;bandicoot&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RemovableImage</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> {chooseFile, removeImage} = useImage({processImgElement, fileBlobToUrl})

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{chooseFile}</span>&gt;</span>
      Insert Image from File
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processImgElement</span>(<span class="hljs-params">imgElement</span>) </span>{
    <span class="hljs-comment">// Every time an image gets inserted, this function gets called with the DOM img element</span>
    imgElement.addEventListener(<span class="hljs-string">&apos;click&apos;</span>, () =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.prompt(<span class="hljs-string">&apos;Are you sure you want to remove this image?&apos;</span>)) {
        removeImage(imgElement)
      }
    })
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fileBlobToUrl</span>(<span class="hljs-params">fileBlob</span>) </span>{
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> FormData()
    formData.append(<span class="hljs-string">&apos;files&apos;</span>, fileBlob)

    <span class="hljs-comment">// We need to return a promise that resolves with a string url that the &lt;img&gt; element can use.</span>
    <span class="hljs-keyword">return</span> fetch(<span class="hljs-string">&apos;/server-api-that-handles-file-uploads&apos;</span>, {
      method: <span class="hljs-string">&apos;POST&apos;</span>,
      body: formData,
    })
    .then(response =&gt; response.json())
    .then(json =&gt; json.newlyCreatedFileUrl)
  }
}
</code></pre>
<h2 id="api">API</h2>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> {chooseFile, removeImage} = useImage({processImgElement, fileBlobToUrl})
</code></pre>
<h3 id="arguments">Arguments</h3>
<p><code>useImage</code> can be called with no arguments (to use the defaults) or with a single object argument with the following properties:</p>
<ul>
<li><code>processImgElement</code> (optional): A function that will be called with each <code>&lt;img&gt;</code> dom element in the rich text editor. This can be used
to set up click listeners, change the style, etc. The function will be called for img elements in the initialHTML, calls to setHTML, and also for
every img element that is inserted via <code>useImage()</code>. Defaults to a no-op function.</li>
<li><code>fileBlobToUrl</code> (optional): A function that will be called whenever the user has picked a file from their computer to insert into the rich text
editor. The <code>fileBlobToUrl</code> function will be called with one argument, a <a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank"><code>File</code></a>.
The return value of <code>fileBlobToUrl</code> must be a promise that resolves with a string url for that FileBlog object. This is useful for uploading a
file to a server before inserting it into the DOM. Defaults to calling <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL" target="_blank"><code>URL.createObjectURL(file)</code></a>.</li>
</ul>
<h2 id="return-value">Return value</h2>
<p><code>useImage</code> returns an object with the following properties:</p>
<ul>
<li><code>chooseFile()</code>: A function that will open up a file picker and allow the user to choose a file from their computer. When the user selects an image,
that image will be inserted into the RichTextEditor.</li>
<li><code>removeImage(imgElement)</code>: A function that will remove an image from the rich text editor while preserving undo/redo state. This function must be called with
one argument, the <code>&lt;img&gt;</code> dom element that you wish to remove.</li>
</ul>
<h2 id="notes">Notes</h2>
<ul>
<li><code>useImage</code> uses <a href="use-document-exec-command.html"><code>useDocumentExecCommand</code></a> underneath the hood to call <code>document.execCommand()</code>.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../walkthrough/headers.html" class="navigation navigation-prev " aria-label="Previous page: H1, H2, H3">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="use-link.html" class="navigation navigation-next " aria-label="Next page: Inserting links">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Inserting images","level":"2.5","depth":1,"next":{"title":"Inserting links","level":"2.6","depth":1,"path":"hooks/use-link.md","ref":"hooks/use-link.md","articles":[]},"previous":{"title":"H1, H2, H3","level":"2.4","depth":1,"path":"walkthrough/headers.md","ref":"walkthrough/headers.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","github","ga"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/CanopyTax/bandicoot"},"ga":{"configuration":"auto","token":"UA-133316058-1"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"hooks/use-image.md","mtime":"2019-03-22T20:28:07.737Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-03-22T20:28:53.971Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

